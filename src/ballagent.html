<doctype HTML>

<html ng-app='BallAgentApp' ng-controller='myDemoCtrl'>
<head>
    <title>Racing Car in Box2d</title>
     
    <script src="lib/angular.js"></script>
    <script src="lib/jquery.js"></script>
    <script src="lib/underscore.js"></script>
    <script src="lib/mousetrap.js"></script>
    <script src="js/util.js"></script>
    <script src="lib/Box2dWeb-2.1.a.3.js"></script>
    <script src="js/Rectangular.js"></script>
    <script src="BallAgent/BallAgent.js"></script>
    <script src="BallAgent/BallAgentLevels.js"></script>
    <script src="js/ngrModel.js"></script>
    <script src="js/ngrStage.js"></script>
    <script src="js/ngrWorld.js"></script>
    <script type="text/javascript" src="lib/easel.js"></script>
    <script type="text/javascript" src="lib/create.js"></script>

    <script>
        var b2Vec2 = Box2D.Common.Math.b2Vec2
            ,   b2AABB = Box2D.Collision.b2AABB
            ,   b2BodyDef = Box2D.Dynamics.b2BodyDef
            ,   b2Body = Box2D.Dynamics.b2Body
            ,   b2FixtureDef = Box2D.Dynamics.b2FixtureDef
            ,   b2Fixture = Box2D.Dynamics.b2Fixture
            ,   b2World = Box2D.Dynamics.b2World
            ,   b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape
            ,   b2CircleShape = Box2D.Collision.Shapes.b2CircleShape
            ,   b2DebugDraw = Box2D.Dynamics.b2DebugDraw
            ,   b2MouseJointDef =  Box2D.Dynamics.Joints.b2MouseJointDef
            ,   b2Shape = Box2D.Collision.Shapes.b2Shape
            ,   b2RevoluteJointDef = Box2D.Dynamics.Joints.b2RevoluteJointDef
            ,   b2Joint = Box2D.Dynamics.Joints.b2Joint
            ,   b2PrismaticJointDef = Box2D.Dynamics.Joints.b2PrismaticJointDef
            ;
    </script>

    <link rel="stylesheet" type="text/css" href="styles/ballAgent.css">
    <link rel="stylesheet" type="text/css" href="styles/animate.css">

</head>
<body >

 <canvas ng-stage id='gameCanvas' width='750' height='500' style="background-color:#333;"></canvas>
<div class='main' >
 <canvas ng-stage id='debugCanvas' width='750' height='500' style="background-color:black;"></canvas>
 <div class='splash-screen'>
 <div class='blinder'></div>
 <div class='main-menu'>
    <h2>BALL AGENT</h2>
    <h3>DO YOU HAVE THE BALLS?</h3>

    <p>CONTROLS: WASD</p>

    <button ng-click="newGame()">NEW GAME</button>

</div>
</div>
 <div>
    <div>
<button ng-click="gotoLevel(1)">LVL 1</button>
<button ng-click="gotoLevel(2)">LVL 2</button>
 <button ng-click="gotoLevel(3)">LVL 3</button>
 <button ng-click="gotoLevel(4)">LVL 4</button>
 <button ng-click="gotoLevel(5)">LVL 5</button>
 <button ng-click="gotoLevel(6)">LVL 6</button>
 <button ng-click="gotoLevel(7)">LVL 7</button>
 <button ng-click="gotoLevel(8)">LVL 8</button>
 <button ng-click="gotoLevel(9)">LVL 9</button>
</div>
<div>
 <button ng-click="gotoLevel(10)">LVL 10</button>
 <button ng-click="gotoLevel(11)">LVL 11</button>
 <button ng-click="gotoLevel(12)">LVL 12</button>
 <button ng-click="gotoLevel(13)">LVL 13</button>
 <button ng-click="gotoLevel(14)">LVL 14</button>
 <button ng-click="gotoLevel(15)">LVL 15</button>
 <button ng-click="gotoLevel(16)">LVL 16</button>
</div>
 <p>Level: {{level}}</p>
 <p>Lives: {{lives}}</p>
</div>
</body>
 
</html>

<!-- ZOR -->
<script>
angular.module("BallAgentApp",['BallAgent'])

.controller('myDemoCtrl',function($scope,$element,BallAgent){

   BallAgent.init($('#gameCanvas')[0],$('#debugCanvas')[0]);   

   $scope.gotoLevel = function(level) {
     BallAgent.gotoLevel(level);
   }

   BallAgent.onStateChange(function(){
        $scope.level = BallAgent.state.currentLevel;
        $scope.lives = BallAgent.state.lives;
        $scope.$apply();
   });

   BallAgent.onGameOver(function(){
        //$('.splash-screen').show();
        $('.splash-screen').removeClass();
        $('.splash-screen').addClass('animated fadeIn');
   });

   $scope.newGame = function() {
       // $('.splash-screen').hide();
        $('.splash-screen').addClass('animated fadeOut');
        BallAgent.newGame();
   }
   /*
   $scope.$watchCollection(BallAgent.state,function(){
      console.log("State change",BallAgent.state)
     $scope.level = BallAgent.state.currentLevel;
  //   $scope.$apply();
   });*/



});



</script>