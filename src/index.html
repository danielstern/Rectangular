<doctype HTML>

<html ng-app='demoApp' ng-controller='myDemoCtrl'>
<head>
    <title>Racing Car in Box2d</title>
     
    <script src="lib/angular.js"></script>
    <script src="lib/jquery.js"></script>
    <script src="lib/Box2dWeb-2.1.a.3.js"></script>
    <script src="js/Rectangular.js"></script>

    <script>
    	var b2Vec2 = Box2D.Common.Math.b2Vec2
    	    ,   b2AABB = Box2D.Collision.b2AABB
    	    ,   b2BodyDef = Box2D.Dynamics.b2BodyDef
    	    ,   b2Body = Box2D.Dynamics.b2Body
    	    ,   b2FixtureDef = Box2D.Dynamics.b2FixtureDef
    	    ,   b2Fixture = Box2D.Dynamics.b2Fixture
    	    ,   b2World = Box2D.Dynamics.b2World
    	    ,   b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape
    	    ,   b2CircleShape = Box2D.Collision.Shapes.b2CircleShape
    	    ,   b2DebugDraw = Box2D.Dynamics.b2DebugDraw
    	    ,   b2MouseJointDef =  Box2D.Dynamics.Joints.b2MouseJointDef
    	    ,   b2Shape = Box2D.Collision.Shapes.b2Shape
    	    ,   b2RevoluteJointDef = Box2D.Dynamics.Joints.b2RevoluteJointDef
    	    ,   b2Joint = Box2D.Dynamics.Joints.b2Joint
    	    ,   b2PrismaticJointDef = Box2D.Dynamics.Joints.b2PrismaticJointDef
    	    ;
    </script>

</head>
<body >
 
<h2>RectAngular.js</h2>

CAN HAZ ANGULOR + BUX2d?
<a href='cardemo.html'>CARDEMO</a>

<div class='main' >
 <canvas ng-stage id='canvas' debug=true width='640' height='480' style="background-color:#333;"></canvas>
</div>
<button ng-click='createBox()'>BOX</button>
</body>
 
</html>

<!-- ZOR -->
<script>
angular.module("demoApp",['Rectangular'])

.controller('myDemoCtrl',function($scope,$element,ngWorld, ngBox, ngrDebug, ngrLoop, $compile){
    //console.log("Demo inited",$scope,$element);
    var elem = $($element.find('canvas'));

    var ctx = $(elem).get(0).getContext('2d');
    console.log("Ctx?",ctx);

    // create world
    var world = ngWorld.setWorld(0,26,true);

    // demo box function
    var box = ngBox.getBox(5, 5, 2,2);
    ngWorld.addElement(box);

    var ball = ngBox.getBall(2,3,1)
    ngWorld.addElement(ball);    

    var floor = ngBox.getFloor();
    ngWorld.addElement(floor);

    ngrDebug.debug(ctx);

    ngrLoop.initWorld(ctx,world, 60);

    $scope.createBox = function(){
        console.log("Creating box...");
        var box = angular.element(document.createElement('ng-box'));
         var el = $compile( box )( $scope );

         angular.element(document.body).append(box);

         $scope.box = el;
    }


    

});

</script>